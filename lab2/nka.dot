digraph NFA {
  rankdir=LR;
  node [shape=circle];

  // стартовая "точка"
  start [shape=point, label=""];
  q0 [shape=doublecircle, label="q0"]; // старт и приём
  q2 [shape=doublecircle, label="q2"]; // хаб 2-й звезды, тоже приём

  // прочие узлы
  qF; qA1; qB1; qA2;
  t1; t2; u1; u2; w1; w2; r1; r2; v1; v2;

  // стартовые eps
  start -> q0;
  q0 -> qF [label="ε"]; // вход в L1
  q0 -> q2 [label="ε"]; // вход в L2

  // ---------- L1 = (X | c)* ----------
  // ветка "один c"
  qF -> q0 [label="c"];

  // X = a a* b b* a b
  qF  -> qA1 [label="a"];
  qA1 -> qA1 [label="a"];
  qA1 -> qB1 [label="b"];
  qB1 -> qB1 [label="b"];
  qB1 -> qA2 [label="a"];
  qA2 -> q0  [label="b"];

  // ---------- L2 = {bab, bacac, baacac, baccbb, baccaba}* ----------
  // общий префикс "ba"
  q2 -> t1 [label="b"];
  t1 -> t2 [label="a"];

  // bab
  t2 -> q2 [label="b"];

  // bacac
  t2 -> u1 [label="c"];
  u1 -> u2 [label="a"];
  u2 -> q2 [label="c"];

  // baacac
  t2 -> v1 [label="a"];
  v1 -> v2 [label="c"];
  v2 -> u2 [label="a"];

  // baccbb
  // (ветку "t2 -> u1 [c]" уже задали)
  u1 -> w1 [label="c"];
  w1 -> w2 [label="b"];
  w2 -> q2 [label="b"];

  // baccaba
  w1 -> r1 [label="a"];
  r1 -> r2 [label="b"];
  r2 -> q2 [label="a"];
}
